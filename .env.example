# Document Anonymizer Configuration
# Copy this file to .env and customize as needed

# Application Settings
APP_ENVIRONMENT=development
APP_DEBUG=true
APP_LOG_LEVEL=INFO
APP_DEVICE=auto
APP_ENABLE_MIXED_PRECISION=true

# Paths
APP_MODELS_DIR=./models
APP_DATA_DIR=./data
APP_OUTPUT_DIR=./output

# Configuration file paths (optional - if provided, will override env vars)
# APP_VAE_CONFIG_PATH=./configs/vae.yaml
# APP_UNET_CONFIG_PATH=./configs/unet.yaml
# APP_ENGINE_CONFIG_PATH=./configs/engine.yaml

# VAE Training Configuration
VAE_MODEL_NAME=document-anonymizer-vae
VAE_VERSION=v1.0
VAE_BASE_MODEL=stabilityai/stable-diffusion-2-1-base
VAE_BATCH_SIZE=16
VAE_LEARNING_RATE=0.0005
VAE_NUM_EPOCHS=100
VAE_MIXED_PRECISION=bf16
VAE_GRADIENT_CLIPPING=1.0

# VAE Loss Configuration
LOSS_KL_WEIGHT=0.00025
LOSS_PERCEPTUAL_WEIGHT=0.1
LOSS_RECON_LOSS_TYPE=mse

# VAE Optimizer Configuration
OPTIMIZER_TYPE=AdamW
OPTIMIZER_LEARNING_RATE=0.0005
OPTIMIZER_WEIGHT_DECAY=0.01

# VAE Scheduler Configuration
SCHEDULER_TYPE=cosine_with_restarts
SCHEDULER_WARMUP_STEPS=1000
SCHEDULER_NUM_CYCLES=3
SCHEDULER_MIN_LR_RATIO=0.1

# UNet Training Configuration
UNET_MODEL_NAME=document-anonymizer-unet
UNET_VERSION=v1.0
UNET_BASE_MODEL=stabilityai/stable-diffusion-2-inpainting
UNET_BATCH_SIZE=8
UNET_LEARNING_RATE=0.0001
UNET_NUM_EPOCHS=50
UNET_MIXED_PRECISION=bf16
UNET_NUM_TRAIN_TIMESTEPS=1000
UNET_NOISE_SCHEDULE=scaled_linear
UNET_TEXT_ENCODER_LR_SCALE=0.1
UNET_FREEZE_TEXT_ENCODER=false

# Dataset Configuration
DATASET_TRAIN_DATA_PATH=./data/train
DATASET_VAL_DATA_PATH=./data/val
DATASET_CROP_SIZE=512
DATASET_NUM_WORKERS=4
DATASET_ROTATION_RANGE=5.0
DATASET_BRIGHTNESS_RANGE=0.1
DATASET_CONTRAST_RANGE=0.1

# Engine Configuration
ENGINE_VAE_MODEL_PATH=./models/vae
ENGINE_UNET_MODEL_PATH=./models/unet
ENGINE_NUM_INFERENCE_STEPS=50
ENGINE_GUIDANCE_SCALE=7.5
ENGINE_STRENGTH=1.0
ENGINE_ENABLE_MEMORY_EFFICIENT_ATTENTION=true
ENGINE_ENABLE_SEQUENTIAL_CPU_OFFLOAD=false
ENGINE_MAX_BATCH_SIZE=4
ENGINE_ENABLE_QUALITY_CHECK=true
ENGINE_MIN_CONFIDENCE_THRESHOLD=0.7

# Preprocessing Configuration
PREPROCESSING_TARGET_CROP_SIZE=512
PREPROCESSING_MAX_SCALE_FACTOR=4.0
PREPROCESSING_MAX_MEMORY_BYTES=1073741824
PREPROCESSING_PADDING_MODE=reflect
PREPROCESSING_INTERPOLATION=lanczos

# Cloudflare R2 Storage Configuration
# Account API Token (with R2:Edit permissions for bucket management)
CLOUDFLARE_ACCOUNT_API_TOKEN=your_cloudflare_api_token_here
CLOUDFLARE_ACCOUNT_ID=your_cloudflare_account_id_here

# R2 Storage Credentials
CLOUDFLARE_R2_ACCESS_KEY_ID=your_r2_access_key_id_here
CLOUDFLARE_R2_SECRET_ACCESS_KEY=your_r2_secret_access_key_here
CLOUDFLARE_R2_ENDPOINT_URL=https://your_account_id.r2.cloudflarestorage.com
CLOUDFLARE_R2_BUCKET_NAME=document-anonymizer-data

# Optional: Custom R2 Token (if created via API)
CLOUDFLARE_R2_TOKEN=your_custom_r2_token_here

# Metrics Configuration
METRICS_ENABLE_METRICS=true
METRICS_METRICS_BACKEND=datadog
METRICS_LOG_LEVEL=INFO
METRICS_LOG_FORMAT=json
