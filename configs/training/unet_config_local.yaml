# UNet Training Configuration - Local Testing/Debugging
# =====================================================
#
# Optimized for local Mac development and testing:
# - Minimal memory usage for MPS backend
# - Small batch sizes and reduced epochs
# - Conservative settings for debugging
# - Fast iteration for development

# Model configuration
model_name: "document-anonymizer-unet-local"
version: "v1.0-local"
base_model: "stabilityai/stable-diffusion-2-inpainting"

# Training parameters - Optimized for local testing
batch_size: 1                   # Minimal for MPS memory constraints
learning_rate: 1.0e-4           # Conservative learning rate
num_epochs: 2                   # Very few epochs for quick testing
gradient_accumulation_steps: 8  # Compensate for small batch size
mixed_precision: "no"           # Disable for compatibility
gradient_clipping: 1.0

# Diffusion parameters
num_train_timesteps: 1000
noise_schedule: "scaled_linear"

# Text conditioning - Conservative settings
text_encoder_lr_scale: 0.1
freeze_text_encoder: true       # Freeze for local testing

# Optimizer and scheduler - Conservative settings
optimizer:
  type: "AdamW"
  learning_rate: 1.0e-4
  weight_decay: 0.01
  betas: [0.9, 0.999]

scheduler:
  type: "cosine_with_restarts"
  warmup_steps: 50              # Reduced for quick testing
  num_cycles: 1                 # Single cycle for testing
  min_lr_ratio: 0.1

# Storage - Local paths
checkpoint_dir: "checkpoints/unet_local"
save_every_n_steps: 25          # Save frequently for debugging
keep_n_checkpoints: 2           # Keep fewer checkpoints locally
